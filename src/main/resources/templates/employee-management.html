<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Employee Management</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link rel="stylesheet" th:href="@{/css/style.css}" />
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
	<link rel="icon" type="image/png" href="Images/logo1.png">
</head>

<body>

	<!-- Sidebar starts-->
	
	
	<div th:replace="~{fragments/admin-sidebar :: frg-admin-sidebar}"> </div>
	
	
	<!-- Sidebar ends -->

	<!-- Main content starts -->
	
	
	<div class="content">
		<h1>Employee Management</h1>
		<p>This is the Employee content area where you can add, update and delete Employees.</p>
		<section>
			<a href="addEmployee" class=" mt-5 btn btn-primary">Add Employee</a>
		</section>
		
		
		<!-- -----------------View  Course starts -------------------------------- -->
		
		
		<section class="mt-5">
			<div th:if="${SuccessMsg}" class="mb-3 alert alert-success" role="alert">
				<span th:text="${SuccessMsg}"></span>
			</div>

			<div th:if="${ErrorMsg}" class="mb-3 alert alert-danger" role="alert">
				<span th:text="${ErrorMsg}"></span>
			</div>
			<table class="table  table-hover table-bordered shadow">
				<thead class="table-dark">
					<tr>
						<th scope="col">Name</th>
						<th scope="col">Email</th>
						<th scope="col">Phone No</th>
						<th scope="col">City</th>
						<th scope="col">Edit Employee</th>
						<th scope="col">Delete Employee</th>
					</tr>
				</thead>
				<tbody>
					<tr th:each="employee : ${employeePage.content}">
						<td th:text="${employee.name}" style="text-align: center;"></td>
						<td th:text="${employee.email}" style="text-align: center;"></td>
						<td th:text="${employee.phoneno}" style="text-align: center;"></td>
						<td th:text="${employee.city}" style="text-align: center;"></td>
						<td style="text-align: center;">
							<a th:href="@{/editEmployee(employeeEmail=${employee.email})}">
								<button type="button" class="btn btn-outline-primary">Edit <i
										class="bi bi-pencil-fill text-primary"></i></button>
							</a>
						</td>
						<td style="text-align: center;">
	<button type="button" th:data-eemail="${employee.email}" class="btn btn-outline-danger" 
	onclick="deleteEmployee(this.getAttribute('data-eemail'))">Delete <i class="bi bi-trash3 text-danger"></i></button>

						</td>
					</tr>
				</tbody>
			</table>
			
			
			<!-- -----------------View  Course ends -------------------------------- -->
			
			<!-- -----------------Pagination starts -------------------------------- -->
			
			
			<nav aria-label="Page navigation">
			  <ul class="pagination">
			    <!-- Previous Button -->
			    <li class="page-item" th:classappend="${employeePage.hasPrevious()} ? '' : 'disabled'">
			      <a class="page-link"
			         th:href="@{/employeeManagement(page=${employeePage.number - 1}, size=${employeePage.size})}"
			         aria-label="Previous">
			        <span aria-hidden="true">&laquo;</span>
			        <span class="sr-only"></span>
			      </a>
			    </li>

			    <!-- Page Numbers -->
			    <li class="page-item"
			        th:each="i : ${#numbers.sequence(0, employeePage.totalPages - 1)}"
			        th:classappend="${employeePage.number == i} ? 'active' : ''">
			      <a class="page-link"
			         th:href="@{/employeeManagement(page=${i}, size=${employeePage.size})}"
			         th:text="${i + 1}">1</a>
			    </li>

			    <!-- Next Button -->
			    <li class="page-item" th:classappend="${employeePage.hasNext()} ? '' : 'disabled'">
			      <a class="page-link"
			         th:href="@{/employeeManagement(page=${employeePage.number + 1}, size=${employeePage.size})}"
			         aria-label="Next">
			        <span aria-hidden="true">&raquo;</span>
			        <span class="sr-only"></span>
			      </a>
			    </li>
			  </ul>
			</nav>

						
			<!-- -----------------Pagination ends -------------------------------- -->
						
		</section>
		
		
		<!-- -----------------Delete Course alert modal starts -------------------------------- -->
	</div>
	<div class="modal" tabindex="-1" id="deleteEmployeeModal">
	  <div class="modal-dialog">
	    <div class="modal-content">
	      <div class="modal-header">
	        <h5 class="modal-title">Delete Employee</h5>
	        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
	      </div>
	      <div class="modal-body">
	        <p>Are you sure you want to delete this?</p>
	      </div>
	      <div class="modal-footer">
	        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
	        <button type="button" class="btn btn-primary" id="delete-employee-btn">Delete</button>
	      </div>
	    </div>
	  </div>
	</div>
	<script>
			var employeeToDelete;
			function deleteEmployee(employeeEmail){
				var deleteEmployeeModal = new bootstrap.Modal(document.getElementById('deleteEmployeeModal'));
				deleteEmployeeModal.show();
				employeeToDelete = employeeEmail;
			}
			document.getElementById('delete-employee-btn').addEventListener('click',function(){
				window.location.href = '/deleteEmployeeDetails?employeeEmail='+encodeURIComponent(employeeToDelete);
			});
		</script>
		
		<!-- -----------------Delete Course alert ends -------------------------------- -->
		
		
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
		crossorigin="anonymous"></script>
		
		
		<!-- Main content ends -->
</body>

</html>